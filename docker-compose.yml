version: '2'
services:
  ruby: &defaults
    build: .
    volumes:
      - .:/usr/src/app

  jekyll:
    <<: *defaults
    ports:
      - "4000:4000"
    command: ["jekyll serve -H 0.0.0.0"]

  test:
    <<: *defaults
    command: ["htmlproofer ./_site --check-favicon --check-html --disable-external"]
